import flash.display.MovieClip;import flash.geom.Point;(function(){ 	var mX = 350;	var mY = 183;	var duraOpenH =  addImage("brainSponged", mX-55, mY-69);	var maskObject:MovieClip = new MovieClip();	maskObject.graphics.beginFill(0xFF0000);	duraOpenH.mask = maskObject;	 	var pSyringeArm = new surgicelArm();	pSyringeArm.y = HEIGHT;	stage.addChild(pSyringeArm);		pSyringeArm.gotoAndStop(0);		toolbox.bringForward();		var sugeonDialog = function(callback){		var messages = new Array("Excellent, that sponge will absorb any excess blood as the patient heals.",								 "The surgical team will take over from here, excellent work!");		var msgs = displayMessages(messages, 50, 60, callback, false, "surgeonFace");	}		var tweenX = null;	var tweenY = null;	var mousePos = {x: mouseX, y: mouseY};	var getMousePos = function(){		mousePos.x = mouseX;		mousePos.y = mouseY;	}		var checkDrawFunc = function(callback){			var checkPoints = new Array({x: 472, y: 345},{x: 492, y: 321},{x: 515, y: 316},{x: 513, y: 291},{x: 536, y: 292},{x: 545, y: 281},{x: 526, y: 260},{x: 529, y: 245},{x: 514, y: 224},{x: 517, y: 245})			var misses = 0;			for(var i in checkPoints){				var point:Point = new Point(checkPoints[i].x, checkPoints[i].y);				if (!duraOpenH.hitTestPoint(point.x, point.y, true)){					misses++;				}			}			if(phase === 0 && misses<checkPoints.length/2){				trace("pushing in needle");				tweenY.stop();				pSyringeArm.y = pSyringeArm.y + 30;				phase = 1;				pSyringeArm.gotoAndStop(2);			}			if(misses>0){				return;			}			if(typeof callback === "function"){				callback();			};			}		var finished = function(){		if(clipHandMove){			clipHandMove.stop();			trace("hand stop moving");		}		clipHandMove = null;		maskObject.graphics.drawCircle(WIDTH/2, HEIGHT/2, WIDTH);   		duraOpenH.mask = maskObject;		stage.removeEventListener(MouseEvent.MOUSE_MOVE,getMousePos);		tweenY = createTween(pSyringeArm, "y", None.easeInOut, HEIGHT, -1, 100);		sugeonDialog(function(){			fadeOut(function(){					remove(duraOpenH);					remove(tbi.rclips);					remove(tbi.muscleback);					remove(tbi.duraOpenH);					gotoAndStop(2);					addImage("sepaLogo", WIDTH/2-200, HEIGHT/2+100);					addImage("neuronLogo",  WIDTH/2+100, HEIGHT/2+100);					var textMsg:TextField = new TextField();					textMsg.textColor = "0xFFFFFF"; 					textMsg.text = "To Be Continued...";					textMsg.x = HEIGHT/2-textMsg.textWidth/2;					textMsg.y += WIDTH/2-textMsg.textHeight/2-100;					textMsg.width = 150;					textMsg.height = 100;					addChild(textMsg);								}); 		});	};	stage.addEventListener(MouseEvent.MOUSE_MOVE, getMousePos);	var phase = 0;	var clipHandMove = timer(25, function(){				var mousex = mousePos.x;		var mousey = mousePos.y;		if(tweenX != null){			tweenX.stop();		}		if(tweenY != null){			tweenY.stop();		}			var deltaX = 950;		var deltaY = 320;		if(phase !== 0){			deltaY -= 30;		}				tweenX = createTween(pSyringeArm, "x", None.easeInOut, mousex-deltaX);		tweenY = createTween(pSyringeArm, "y", None.easeInOut, mousey-deltaY);		maskObject.graphics.drawCircle(pSyringeArm.x+deltaX, pSyringeArm.y+deltaY, 10);   		duraOpenH.mask = maskObject;		checkDrawFunc(finished);			}, 0);					})();