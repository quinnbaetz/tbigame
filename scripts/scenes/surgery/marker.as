import flash.display.MovieClip;import flash.geom.Point;(function(){ 	var ErrorMargin = 10//15;    var mX = 300;	var mY = 150;	var pOutline =  addImage("markerOutline", mX-10, mY-12);	var pMarker =  addImage("markerDotted", mX, mY);	var pMarkerLine =  addImage("markerLine", mX-5, mY);	tbi.userLine = pMarkerLine;	var pMarkerArm = new markerArm();	pMarkerArm.y = stage.height;	stage.addChild(pMarkerArm);	pMarkerArm.stop();		toolbox.bringForward();			pMarker.alpha = 0;	pOutline.alpha = 0;			var userLine = new MovieClip();		userLine.graphics.beginFill(0xFF0000);	pMarkerLine.mask = userLine;			userLine.x = 0;	userLine.y = 0;		createTween(pMarker, "alpha", None.easeInOut, .3, -1, 100)	//createTween(pOutline, "alpha", None.easeInOut, .7, -1, 100)		var getMousePos = function(){		var armx = pMarkerArm.arm.x+458;		var army = pMarkerArm.arm.y+165;		var lastHypot = hypot(armx-mouseX, army-mouseY);		if(lastHypot < 30){			var prev = pMarkerArm.currentFrame;			pMarkerArm.nextFrame();			var armx = pMarkerArm.arm.x+458;			var army = pMarkerArm.arm.y+165;			if(lastHypot < hypot(armx-mouseX, army-mouseY)){				pMarkerArm.prevFrame();				return;			}			userLine.graphics.drawCircle(armx, army, 45);			if(prev === pMarkerArm.currentFrame){				stage.removeEventListener(MouseEvent.MOUSE_MOVE,getMousePos);				pMarkerArm.stop();				fadeLines(function(){					remove(pMarker);					remove(pOutline);					remove(pMarkerArm);					lastFrame = -1;					gotoAndStop("Scene_SurgeryPatient");				});			}		}		}		stage.addEventListener(MouseEvent.MOUSE_MOVE, getMousePos);			 	var tweenX = createTween(pMarkerArm, "x", None.easeNone, 457);	var tweenY = createTween(pMarkerArm, "y", None.easeNone, 153, -1, 100, function(){		trace("starting clip");	});				var fadeLines = function(callback){		var tweens = new Array();		var waiter = null;				tweens.push(createTween(pMarkerArm, "y", None.easeInOut, HEIGHT, -1, 100));		//tweens.push(createTween(pOutline, "alpha", None.easeInOut, 0, -1, 100, function(){		tweens.push(createTween(pMarker, "alpha", None.easeInOut, 0, -1, 100, function(){			waiter.kill();			callback();		}));				waiter = waitOnUser(function(){			for(var i in tweens){				tweens[i].fforward();				tweens[i] = null;			}			tweens = null;		});			}			})();