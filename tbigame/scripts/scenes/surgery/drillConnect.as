import flash.display.MovieClip;import flash.geom.Point;(function(){ 	var ErrorMargin = 10//15;    var mX = 317;	var mY = 165;	var pOutline =  addImage("headLinesRegion", mX-6, mY-10);	var pMarker =  addImage("headLines", mX-11, mY-11);	var pMarkerLine =  addImage("skullBone", mX, mY);			var sugeonDialogError = function(callback){		var messages = new Array("If you have trouble connecting the keyholes, take a break and try again, we need to be a precise as possible.");		var msgs = displayMessages(messages, 50, 60, callback, false, "surgeonFace");	}				pMarker.alpha = 0;	pOutline.alpha = 0;	bringToFront(stage, tbi.pDrillArm);		toolbox.bringForward();	createTween(pMarker, "alpha", None.easeInOut, .8, -1, 100);		createTween(tbi.pDrillArm, "x", None.easeNone, 390, -1, 40);	createTween(tbi.pDrillArm, "y", None.easeNone, -320, -1, 40, function(){		stage.addEventListener(MouseEvent.MOUSE_MOVE, getMousePos);	});		var userLine = new MovieClip();		userLine.graphics.beginFill(0xFF0000);	pMarkerLine.mask = userLine;			userLine.x = 0;	userLine.y = 0;		var fadeLines = function(callback){		var tweens = new Array();		var waiter = null;		tweens.push(createTween(tbi.pDrillArm, "y", None.easeInOut, 0, -1, 100));		tweens.push(createTween(tbi.pDrillArm, "x", None.easeInOut, WIDTH, -1, 100));		//tweens.push(createTween(pOutline, "alpha", None.easeInOut, 0, -1, 100, function(){		tweens.push(createTween(pMarker, "alpha", None.easeInOut, 0, -1, 100, function(){			waiter.kill();			callback();		}));				waiter = waitOnUser(function(){			for(var i in tweens){				tweens[i].fforward();				tweens[i] = null;			}			tweens = null;		});			}		 var getMousePos = function(){		var armx = tbi.pDrillArm.arm.x+438;		var army = tbi.pDrillArm.arm.y+255;		trace("MOUSE>", mouseX, mouseY);		trace("ARMSS>", armx, army);		var lastHypot = hypot(armx-mouseX, army-mouseY);		if(lastHypot < 30){			var prev = tbi.pDrillArm.currentFrame;			tbi.pDrillArm.nextFrame();			var armx = tbi.pDrillArm.arm.x+438;			var army = tbi.pDrillArm.arm.y+255;			if(lastHypot < hypot(armx-mouseX, army-mouseY)){				tbi.pDrillArm.prevFrame();				return;			}			userLine.graphics.drawCircle(armx, army, 7);			if(prev === tbi.pDrillArm.currentFrame){				tbi.pDrillArm.stop();				if(clipHandMove){					clipHandMove.stop();					trace("hand stop moving");				}				clipHandMove = null;								tweenX.stop();				tweenY.stop();				stage.removeEventListener(MouseEvent.MOUSE_MOVE,getMousePos);				fadeLines(function(){					stage.removeChild(pOutline);					stage.removeChild(pMarker);					stage.removeChild(pMarkerLine);					stage.removeChild(holes);					stage.removeChild(tbi.pDrillArm);					lastFrame = -1;					gotoAndStop("Scene_SurgeryPatient");				});			}		}		}										})();